<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–†–ï–ü–û–†–¢–Å–†: –ë–µ–≥ –∑–∞ –Ω–æ–≤–æ—Å—Ç—å—é</title>
  
  <!-- –®—Ä–∏—Ñ—Ç—ã –∫–∞–∫ –≤ –≤–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;500;600;700&family=Oswald:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      user-select: none;
    }

    body {
      font-family: "Barlow Condensed", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: #f5f5f5;
      background: radial-gradient(circle at top, #253663 0, #050918 60%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      overflow-x: hidden;
    }

    /* –†–∞–º–∫–∞ —Å –ª–æ–≥–æ */
    #logo-frame {
      padding: 8px 24px;
      border-radius: 20px;
      background: rgba(5, 9, 24, 0.88);
      border: 2px solid #f1e3b4;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
      margin-bottom: 15px;
      max-width: 90vw;
    }

    #logo-frame h1 {
      font-size: 28px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      text-shadow: 0 4px 8px rgba(0,0,0,0.5);
      color: #f1e3b4;
      font-family: "Oswald", sans-serif;
      margin: 0;
      padding: 0;
    }

    #subtitle {
      font-size: 16px;
      opacity: 0.9;
      margin-bottom: 20px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.6);
      text-align: center;
      max-width: 90vw;
    }

    /* –ü–∞–Ω–µ–ª—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è */
    .equipment-progress {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-bottom: 25px;
      position: relative;
    }

    .equipment-progress::before {
      content: '';
      position: absolute;
      top: 35px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      height: 4px;
      background: rgba(241, 227, 180, 0.3);
      z-index: 1;
    }

    .equipment-item {
      position: relative;
      z-index: 2;
      text-align: center;
      transition: all 0.3s ease;
    }

    .equipment-item.active {
      transform: scale(1.15);
    }

    .equipment-item.completed::before {
      content: '';
      position: absolute;
      top: 35px;
      left: 50%;
      transform: translateX(-50%);
      width: 30px;
      height: 4px;
      background: #f1e3b4;
    }

    .equipment-icon {
      width: 50px;
      height: 50px;
      background: rgba(5, 9, 24, 0.8);
      border: 2px solid rgba(241, 227, 180, 0.9);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      margin: 0 auto 8px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .equipment-item.active .equipment-icon {
      background: rgba(241, 227, 180, 0.2);
      border-color: #f1e3b4;
      box-shadow: 0 0 20px rgba(241, 227, 180, 0.4);
    }

    .equipment-name {
      font-size: 14px;
      font-weight: 500;
      color: rgba(255, 255, 255, 0.9);
    }

    .equipment-item.active .equipment-name {
      color: #f1e3b4;
      font-weight: 600;
    }

    /* –ò–≥—Ä–æ–≤–∞—è –∑–æ–Ω–∞ */
    .game-container {
      position: relative;
      width: 100%;
      max-width: 800px;
      height: 400px;
      background: linear-gradient(180deg, #0b1630 0%, #1a237e 100%);
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.7);
      border: 2px solid #f1e3b4;
    }

    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }

    /* –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
    .stats-panel {
      display: flex;
      justify-content: space-between;
      width: 100%;
      max-width: 800px;
      margin-top: 25px;
      background: rgba(5, 9, 24, 0.8);
      padding: 15px 25px;
      border-radius: 12px;
      border: 1px solid rgba(241, 227, 180, 0.9);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
    }

    .stat {
      text-align: center;
      padding: 0 10px;
    }

    .stat-label {
      font-size: 14px;
      opacity: 0.8;
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .stat-value {
      font-family: "Oswald", sans-serif;
      font-size: 28px;
      font-weight: 600;
      color: #f1e3b4;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    }

    /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */
    .controls {
      margin-top: 25px;
      text-align: center;
      background: rgba(5, 9, 24, 0.5);
      padding: 15px;
      border-radius: 10px;
      max-width: 800px;
      width: 100%;
      border: 1px solid rgba(241, 227, 180, 0.3);
    }

    .controls h3 {
      color: #f1e3b4;
      margin-bottom: 10px;
      font-family: "Oswald", sans-serif;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .key {
      display: inline-block;
      padding: 6px 12px;
      margin: 0 5px;
      background: rgba(241, 227, 180, 0.1);
      border-radius: 6px;
      border: 1px solid rgba(241, 227, 180, 0.5);
      font-family: monospace;
      font-size: 14px;
    }

    /* –≠–∫—Ä–∞–Ω –Ω–∞—á–∞–ª–∞/–∫–æ–Ω—Ü–∞ */
    .screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(5, 9, 24, 0.95);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 100;
      text-align: center;
      padding: 40px;
      backdrop-filter: blur(2px);
    }

    .screen h2 {
      font-family: "Oswald", sans-serif;
      font-size: 36px;
      color: #f1e3b4;
      margin-bottom: 20px;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.7);
    }

    .screen p {
      font-size: 18px;
      margin-bottom: 15px;
      max-width: 600px;
      line-height: 1.5;
    }

    .screen .score {
      font-size: 42px;
      color: #f1e3b4;
      margin: 20px 0;
      font-family: "Oswald", sans-serif;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.7);
    }

    .btn {
      background: linear-gradient(135deg, #f1e3b4 0%, #d4b873 100%);
      color: #0b1630;
      border: none;
      padding: 15px 45px;
      font-size: 18px;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      margin-top: 25px;
      font-family: "Oswald", sans-serif;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 25px rgba(0, 0, 0, 0.5);
    }

    .btn:active {
      transform: translateY(-1px);
    }

    /* –ú–æ–±–∏–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ */
    .mobile-controls {
      display: none;
      position: absolute;
      bottom: 25px;
      width: 100%;
      justify-content: space-around;
      padding: 0 40px;
      z-index: 50;
    }

    .mobile-btn {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: rgba(241, 227, 180, 0.9);
      border: 3px solid rgba(255, 255, 255, 0.9);
      font-size: 24px;
      color: #0b1630;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
      transition: all 0.2s;
    }

    .mobile-btn:active {
      transform: scale(0.95);
      background: rgba(241, 227, 180, 1);
    }

    /* –§—É—Ç–µ—Ä */
    #footer {
      margin-top: 25px;
      font-size: 14px;
      line-height: 1.4;
      opacity: 0.8;
      text-align: center;
      max-width: 90vw;
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (max-width: 768px) {
      #logo-frame h1 {
        font-size: 22px;
        letter-spacing: 0.15em;
      }
      
      #subtitle {
        font-size: 14px;
      }
      
      .equipment-progress {
        gap: 20px;
      }
      
      .equipment-icon {
        width: 40px;
        height: 40px;
        font-size: 20px;
      }
      
      .game-container {
        height: 350px;
      }
      
      .stats-panel {
        flex-direction: column;
        gap: 15px;
        padding: 15px;
      }
      
      .stat {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      .stat-label {
        margin-bottom: 0;
      }
      
      .mobile-controls {
        display: flex;
      }
      
      .controls {
        display: none;
      }
      
      .screen h2 {
        font-size: 28px;
      }
      
      .screen p {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <!-- –†–∞–º–∫–∞ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º -->
  <div id="logo-frame">
    <h1>–†–ï–ü–û–†–¢–Å–†: –ë–µ–≥ –∑–∞ –Ω–æ–≤–æ—Å—Ç—å—é</h1>
  </div>

  <div id="subtitle">
    –°–æ–±–µ—Ä–∏ –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏ –∏–∑–±–µ–≥–∞–π –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π!
  </div>

  <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è -->
  <div class="equipment-progress">
    <div class="equipment-item active" id="equip1">
      <div class="equipment-icon">üì∞</div>
      <div class="equipment-name">–ì–∞–∑–µ—Ç–∞</div>
    </div>
    <div class="equipment-item" id="equip2">
      <div class="equipment-icon">üé§</div>
      <div class="equipment-name">–î–∏–∫—Ç–æ—Ñ–æ–Ω</div>
    </div>
    <div class="equipment-item" id="equip3">
      <div class="equipment-icon">üéôÔ∏è</div>
      <div class="equipment-name">–ú–∏–∫—Ä–æ—Ñ–æ–Ω</div>
    </div>
    <div class="equipment-item" id="equip4">
      <div class="equipment-icon">üìπ</div>
      <div class="equipment-name">–ö–∞–º–µ—Ä–∞</div>
    </div>
  </div>

  <!-- –ò–≥—Ä–æ–≤–∞—è –∑–æ–Ω–∞ -->
  <div class="game-container">
    <canvas id="gameCanvas" width="800" height="400"></canvas>
    
    <!-- –ú–æ–±–∏–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ -->
    <div class="mobile-controls">
      <div class="mobile-btn" id="jumpBtn">‚¨ÜÔ∏è</div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –Ω–∞—á–∞–ª–∞ -->
    <div class="screen" id="startScreen">
      <h2>–†–ï–ü–û–†–¢–Å–†</h2>
      <p>–í—ã ‚Äî –∂—É—Ä–Ω–∞–ª–∏—Å—Ç, –±–µ–≥—É—â–∏–π –∑–∞ –Ω–æ–≤–æ—Å—Ç—å—é.<br>
      –°–æ–±–∏—Ä–∞–π—Ç–µ –ª–æ–≥–æ—Ç–∏–ø—ã –¢–ê–°–° –∏ –∂—É—Ä—Ñ–∞–∫–∞, –∏–∑–±–µ–≥–∞–π—Ç–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π.</p>
      <p>–° –∫–∞–∂–¥—ã–º —É—Ä–æ–≤–Ω–µ–º –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –Ω–æ–≤–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ<br>
      –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å–∫–æ—Ä–æ—Å—Ç—å –±–µ–≥–∞.</p>
      <button class="btn" id="startBtn">–ù–ê–ß–ê–¢–¨ –†–ê–ë–û–¢–£</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∫–æ–Ω—Ü–∞ -->
    <div class="screen" id="gameOverScreen" style="display: none;">
      <h2>–†–ï–î–ê–ö–¶–ò–Ø –ó–ê–ö–†–´–¢–ê</h2>
      <p>–í—ã –Ω–µ —É—Å–ø–µ–ª–∏ –∫ –¥–µ–¥–ª–∞–π–Ω—É...</p>
      <div class="score" id="finalScore">0</div>
      <p>–°–æ–±—Ä–∞–Ω–æ –Ω–æ–≤–æ—Å—Ç–µ–π: <span id="collectedItems">0</span></p>
      <p>–ü—Ä–æ–π–¥–µ–Ω–æ —É—Ä–æ–≤–Ω–µ–π: <span id="levelsPassed">0</span></p>
      <button class="btn" id="restartBtn">–°–î–ê–¢–¨ –°–¢–ê–¢–¨–Æ –ó–ê–ù–û–í–û</button>
    </div>
  </div>

  <!-- –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
  <div class="stats-panel">
    <div class="stat">
      <div class="stat-label">–£–†–û–í–ï–ù–¨</div>
      <div class="stat-value" id="levelDisplay">1</div>
    </div>
    <div class="stat">
      <div class="stat-label">–ù–û–í–û–°–¢–ò</div>
      <div class="stat-value" id="scoreDisplay">0</div>
    </div>
    <div class="stat">
      <div class="stat-label">–°–ö–û–†–û–°–¢–¨</div>
      <div class="stat-value" id="speedDisplay">1.0x</div>
    </div>
    <div class="stat">
      <div class="stat-label">–°–ù–ê–†–Ø–ñ–ï–ù–ò–ï</div>
      <div class="stat-value" id="equipmentDisplay">üì∞</div>
    </div>
  </div>

  <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
  <div class="controls">
    <h3>–£–ü–†–ê–í–õ–ï–ù–ò–ï</h3>
    <p>–ü–ö: <span class="key">–ü–†–û–ë–ï–õ</span> –∏–ª–∏ <span class="key">–°–¢–†–ï–õ–ö–ê –í–í–ï–†–•</span> ‚Äî –ø—Ä—ã–∂–æ–∫</p>
    <p>–¢–µ–ª–µ—Ñ–æ–Ω: –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É <span class="key">‚¨ÜÔ∏è</span> –Ω–∞ —ç–∫—Ä–∞–Ω–µ</p>
  </div>

  <!-- –§—É—Ç–µ—Ä -->
  <div id="footer">
    –ö—Å–µ–Ω–∏—è –ú–∏—Ö–∞–π–ª–æ–≤–Ω–∞ –ö–æ–Ω–∫–∏–Ω–∞<br>
    –∂—É—Ä—Ñ–∞–∫ –ú–ì–£ –ª—É—á—à–∏–π ü§ç
  </div>

  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è canvas
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    
    // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    const startScreen = document.getElementById('startScreen');
    const gameOverScreen = document.getElementById('gameOverScreen');
    const startBtn = document.getElementById('startBtn');
    const restartBtn = document.getElementById('restartBtn');
    const jumpBtn = document.getElementById('jumpBtn');
    
    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    const levelDisplay = document.getElementById('levelDisplay');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const speedDisplay = document.getElementById('speedDisplay');
    const equipmentDisplay = document.getElementById('equipmentDisplay');
    const finalScore = document.getElementById('finalScore');
    const collectedItems = document.getElementById('collectedItems');
    const levelsPassed = document.getElementById('levelsPassed');
    
    // –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
    const equipmentItems = document.querySelectorAll('.equipment-item');

    // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä—ã
    const config = {
      groundHeight: 80,
      player: {
        width: 35,
        height: 65,
        x: 150,
        jumpPower: -16,
        gravity: 0.8,
        moveSpeed: 4
      },
      game: {
        speed: 1.0,
        level: 1,
        score: 0,
        lives: 3,
        equipmentIndex: 0,
        itemsCollected: 0,
        itemsToNextLevel: 8,
        running: false,
        time: 0
      }
    };

    // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
    let player = {
      x: config.player.x,
      y: canvas.height - config.groundHeight - config.player.height,
      velocityY: 0,
      isJumping: false,
      animationFrame: 0
    };

    let obstacles = [];
    let items = [];
    let lastObstacleTime = 0;
    let lastItemTime = 0;

    // –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    const images = {
      tass: new Image(),
      journ: new Image()
    };

    // –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–µ—Å–ª–∏ —Ñ–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã)
    images.tass.onerror = () => {
      console.log('–§–∞–π–ª tass.png –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É—é –∑–∞–≥–ª—É—à–∫—É');
      // –°–æ–∑–¥–∞—ë–º –∑–∞–≥–ª—É—à–∫—É –¥–ª—è –¢–ê–°–°
      const tassCanvas = document.createElement('canvas');
      tassCanvas.width = 100;
      tassCanvas.height = 100;
      const tassCtx = tassCanvas.getContext('2d');
      
      // –ë–µ–ª—ã–π –∫—Ä—É–≥ —Å –∫—Ä–∞—Å–Ω–æ–π –±—É–∫–≤–æ–π –¢
      tassCtx.fillStyle = '#ffffff';
      tassCtx.beginPath();
      tassCtx.arc(50, 50, 45, 0, Math.PI * 2);
      tassCtx.fill();
      
      tassCtx.strokeStyle = '#d32f2f';
      tassCtx.lineWidth = 6;
      tassCtx.stroke();
      
      tassCtx.fillStyle = '#d32f2f';
      tassCtx.font = 'bold 50px Arial';
      tassCtx.textAlign = 'center';
      tassCtx.textBaseline = 'middle';
      tassCtx.fillText('–¢', 50, 50);
      
      images.tass.src = tassCanvas.toDataURL();
    };

    images.journ.onerror = () => {
      console.log('–§–∞–π–ª journ.png –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É—é –∑–∞–≥–ª—É—à–∫—É');
      // –°–æ–∑–¥–∞—ë–º –∑–∞–≥–ª—É—à–∫—É –¥–ª—è –∂—É—Ä—Ñ–∞–∫–∞
      const journCanvas = document.createElement('canvas');
      journCanvas.width = 100;
      journCanvas.height = 100;
      const journCtx = journCanvas.getContext('2d');
      
      // –°–∏–Ω–∏–π –∫—Ä—É–≥ —Å –±–µ–ª–æ–π –±—É–∫–≤–æ–π –ñ
      journCtx.fillStyle = '#1976d2';
      journCtx.beginPath();
      journCtx.arc(50, 50, 45, 0, Math.PI * 2);
      journCtx.fill();
      
      journCtx.strokeStyle = '#ffffff';
      journCtx.lineWidth = 4;
      journCtx.stroke();
      
      journCtx.fillStyle = '#ffffff';
      journCtx.font = 'bold 50px Arial';
      journCtx.textAlign = 'center';
      journCtx.textBaseline = 'middle';
      journCtx.fillText('–ñ', 50, 50);
      
      images.journ.src = journCanvas.toDataURL();
    };

    // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
    images.tass.src = 'tass.png';
    images.journ.src = 'journ.png';

    // –¢–∏–ø—ã –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
    const obstacleTypes = [
      { width: 80, height: 50, color: '#8D6E63', name: '–ë—Ä–µ–≤–Ω–æ', shadow: true },
      { width: 60, height: 40, color: '#795548', name: '–ö–∞–º–µ–Ω—å', shadow: true },
      { width: 50, height: 70, color: '#5D4037', name: '–Ø—â–∏–∫', shadow: true },
      { width: 100, height: 25, color: '#78909C', name: '–ë–∞—Ä—å–µ—Ä', shadow: false }
    ];

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
    function initGame() {
      config.game.running = true;
      config.game.score = 0;
      config.game.level = 1;
      config.game.speed = 1.0;
      config.game.lives = 3;
      config.game.equipmentIndex = 0;
      config.game.itemsCollected = 0;
      config.game.itemsToNextLevel = 8;
      config.game.time = 0;
      
      player.x = config.player.x;
      player.y = canvas.height - config.groundHeight - config.player.height;
      player.velocityY = 0;
      player.isJumping = false;
      player.animationFrame = 0;
      
      obstacles = [];
      items = [];
      lastObstacleTime = 0;
      lastItemTime = 0;
      
      updateDisplay();
      updateEquipmentProgress();
      
      startScreen.style.display = 'none';
      gameOverScreen.style.display = 'none';
      
      requestAnimationFrame(gameLoop);
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    function updateDisplay() {
      levelDisplay.textContent = config.game.level;
      scoreDisplay.textContent = config.game.score;
      speedDisplay.textContent = config.game.speed.toFixed(1) + 'x';
      
      // –ò–∫–æ–Ω–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
      const icons = ['üì∞', 'üé§', 'üéôÔ∏è', 'üìπ'];
      equipmentDisplay.textContent = icons[config.game.equipmentIndex];
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
    function updateEquipmentProgress() {
      equipmentItems.forEach((item, index) => {
        item.classList.remove('active', 'completed');
        
        if (index < config.game.equipmentIndex) {
          item.classList.add('completed');
        }
        if (index === config.game.equipmentIndex) {
          item.classList.add('active');
        }
      });
    }

    // –ü—Ä—ã–∂–æ–∫
    function jump() {
      if (!player.isJumping && config.game.running) {
        player.velocityY = config.player.jumpPower;
        player.isJumping = true;
      }
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
    function updatePlayer() {
      // –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
      player.velocityY += config.player.gravity;
      player.y += player.velocityY;
      
      // –ó–µ–º–ª—è
      const groundLevel = canvas.height - config.groundHeight - config.player.height;
      if (player.y > groundLevel) {
        player.y = groundLevel;
        player.velocityY = 0;
        player.isJumping = false;
      }
      
      // –ê–Ω–∏–º–∞—Ü–∏—è
      player.animationFrame++;
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
    function createObstacle() {
      const type = obstacleTypes[Math.floor(Math.random() * obstacleTypes.length)];
      const obstacle = {
        x: canvas.width + 50,
        y: canvas.height - config.groundHeight - type.height,
        ...type,
        speed: 6 * config.game.speed
      };
      obstacles.push(obstacle);
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞
    function createItem() {
      const types = [
        { type: 'tass', value: 5, radius: 22 },
        { type: 'journ', value: 10, radius: 25 }
      ];
      
      const itemType = types[Math.floor(Math.random() * types.length)];
      const item = {
        x: canvas.width + 30,
        y: Math.random() * (canvas.height - 200) + 50,
        ...itemType,
        speed: 4 * config.game.speed,
        rotation: 0,
        shadow: true
      };
      items.push(item);
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
    function updateObstacles() {
      const currentTime = Date.now();
      
      // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
      if (currentTime - lastObstacleTime > 1500 / config.game.speed) {
        createObstacle();
        lastObstacleTime = currentTime;
      }
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
      for (let i = obstacles.length - 1; i >= 0; i--) {
        const obs = obstacles[i];
        obs.x -= obs.speed;
        
        // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –∏–≥—Ä–æ–∫–æ–º
        if (player.x < obs.x + obs.width &&
            player.x + config.player.width > obs.x &&
            player.y < obs.y + obs.height &&
            player.y + config.player.height > obs.y) {
          
          obstacles.splice(i, 1);
          config.game.lives--;
          
          if (config.game.lives <= 0) {
            gameOver();
            return;
          }
        }
        
        // –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞ —ç–∫—Ä–∞–Ω–æ–º
        if (obs.x + obs.width < 0) {
          obstacles.splice(i, 1);
        }
      }
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    function updateItems() {
      const currentTime = Date.now();
      
      // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤
      if (currentTime - lastItemTime > 1200 / config.game.speed) {
        createItem();
        lastItemTime = currentTime;
      }
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
      for (let i = items.length - 1; i >= 0; i--) {
        const item = items[i];
        item.x -= item.speed;
        item.rotation += 0.05;
        
        // –°–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–∞
        const dx = player.x + config.player.width/2 - item.x;
        const dy = player.y - item.y;
        const distance = Math.sqrt(dx * dx + dy * dy);
        
        if (distance < config.player.width/2 + item.radius) {
          config.game.score += item.value;
          config.game.itemsCollected++;
          
          // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å
          if (config.game.itemsCollected >= config.game.itemsToNextLevel) {
            levelUp();
          }
          
          items.splice(i, 1);
          updateDisplay();
          continue;
        }
        
        // –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞ —ç–∫—Ä–∞–Ω–æ–º
        if (item.x + item.radius < 0) {
          items.splice(i, 1);
        }
      }
    }

    // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å
    function levelUp() {
      config.game.level++;
      config.game.speed += 0.15;
      
      // –ù–æ–≤–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ (–º–∞–∫—Å–∏–º—É–º 4 —É—Ä–æ–≤–Ω—è)
      if (config.game.equipmentIndex < 3) {
        config.game.equipmentIndex++;
      }
      
      config.game.itemsCollected = 0;
      config.game.itemsToNextLevel = Math.floor(config.game.itemsToNextLevel * 1.15);
      
      updateDisplay();
      updateEquipmentProgress();
      
      // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç
      ctx.fillStyle = 'rgba(241, 227, 180, 0.2)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    }

    // –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã
    function gameOver() {
      config.game.running = false;
      finalScore.textContent = config.game.score;
      collectedItems.textContent = config.game.itemsCollected;
      levelsPassed.textContent = config.game.level - 1;
      gameOverScreen.style.display = 'flex';
    }

    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ñ–æ–Ω–∞
    function drawBackground() {
      // –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω–æ–µ –Ω–µ–±–æ
      const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
      gradient.addColorStop(0, '#0b1630');
      gradient.addColorStop(0.5, '#1a237e');
      gradient.addColorStop(1, '#283593');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      // –ó–≤—ë–∑–¥—ã
      ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
      for (let i = 0; i < 50; i++) {
        const x = (i * 13.7) % canvas.width;
        const y = (i * 5.3) % (canvas.height - config.groundHeight);
        const size = Math.sin(config.game.time * 0.001 + i) * 0.5 + 1;
        ctx.beginPath();
        ctx.arc(x, y, size, 0, Math.PI * 2);
        ctx.fill();
      }
      
      // –ó–µ–º–ª—è
      ctx.fillStyle = '#2E3B4E';
      ctx.fillRect(0, canvas.height - config.groundHeight, canvas.width, config.groundHeight);
      
      // –¢—Ä–∞–≤–∞ —Å —Ç–µ–Ω—è–º–∏
      ctx.fillStyle = '#4CAF50';
      for (let i = 0; i < canvas.width; i += 15) {
        const height = 15 + Math.sin(config.game.time * 0.002 + i) * 5;
        ctx.fillRect(i, canvas.height - config.groundHeight, 10, -height);
      }
      
      // –¢–µ–Ω—å –æ—Ç –∑–µ–º–ª–∏
      ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
      ctx.fillRect(0, canvas.height - config.groundHeight, canvas.width, 5);
    }

    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä–æ–∫–∞
    function drawPlayer() {
      ctx.save();
      
      // –¢–µ–Ω—å
      ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
      ctx.beginPath();
      ctx.ellipse(
        player.x + config.player.width/2,
        canvas.height - config.groundHeight + 5,
        config.player.width/2 * (0.8 + Math.sin(player.animationFrame * 0.1) * 0.2),
        5,
        0, 0, Math.PI * 2
      );
      ctx.fill();
      
      // –¢–µ–ª–æ
      const colors = ['#FF5722', '#2196F3', '#9C27B0', '#FF9800'];
      ctx.fillStyle = colors[config.game.equipmentIndex];
      
      // –°–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–π –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ –¥–ª—è —Ç–µ–ª–∞
      ctx.beginPath();
      ctx.roundRect(player.x, player.y, config.player.width, config.player.height, 8);
      ctx.fill();
      
      // –¢–µ–Ω—å –Ω–∞ —Ç–µ–ª–µ
      ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
      ctx.beginPath();
      ctx.roundRect(player.x, player.y, config.player.width, config.player.height/2, 8);
      ctx.fill();
      
      // –ì–æ–ª–æ–≤–∞
      ctx.fillStyle = '#FFCCBC';
      ctx.beginPath();
      ctx.arc(
        player.x + config.player.width/2,
        player.y - 8,
        18,
        0, Math.PI * 2
      );
      ctx.fill();
      
      // –í–æ–ª–æ—Å—ã
      ctx.fillStyle = '#5D4037';
      ctx.beginPath();
      ctx.arc(
        player.x + config.player.width/2,
        player.y - 15,
        15,
        Math.PI, Math.PI * 2
      );
      ctx.fill();
      
      // –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –≤ —Ä—É–∫–µ
      const equipmentIcons = ['üì∞', 'üé§', 'üéôÔ∏è', 'üìπ'];
      ctx.font = '24px Arial';
      ctx.fillText(
        equipmentIcons[config.game.equipmentIndex],
        player.x + config.player.width + 8,
        player.y + 25
      );
      
      // –ù–æ–≥–∏ (–∞–Ω–∏–º–∞—Ü–∏—è –±–µ–≥–∞)
      const legOffset = Math.sin(player.animationFrame * 0.2) * 8;
      ctx.fillStyle = '#5D4037';
      
      // –õ–µ–≤–∞—è –Ω–æ–≥–∞
      ctx.beginPath();
      ctx.roundRect(
        player.x - 5,
        player.y + config.player.height - 15,
        12,
        20 + legOffset,
        4
      );
      ctx.fill();
      
      // –ü—Ä–∞–≤–∞—è –Ω–æ–≥–∞
      ctx.beginPath();
      ctx.roundRect(
        player.x + config.player.width - 7,
        player.y + config.player.height - 15,
        12,
        20 - legOffset,
        4
      );
      ctx.fill();
      
      ctx.restore();
    }

    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
    function drawObstacles() {
      obstacles.forEach(obs => {
        ctx.save();
        
        // –¢–µ–Ω—å
        if (obs.shadow) {
          ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
          ctx.fillRect(obs.x, obs.y + obs.height, obs.width, 5);
        }
        
        // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç
        ctx.fillStyle = obs.color;
        ctx.beginPath();
        ctx.roundRect(obs.x, obs.y, obs.width, obs.height, 6);
        ctx.fill();
        
        // –¢–µ–Ω—å –Ω–∞ –æ–±—ä–µ–∫—Ç–µ
        ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
        ctx.beginPath();
        ctx.roundRect(obs.x, obs.y, obs.width, obs.height/3, 6);
        ctx.fill();
        
        // –ù–∞–∑–≤–∞–Ω–∏–µ
        ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
        ctx.font = '12px "Barlow Condensed"';
        ctx.textAlign = 'center';
        ctx.fillText(obs.name, obs.x + obs.width/2, obs.y - 10);
        
        ctx.restore();
      });
    }

    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    function drawItems() {
      items.forEach(item => {
        ctx.save();
        
        // –¢–µ–Ω—å
        if (item.shadow) {
          ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';
          ctx.beginPath();
          ctx.ellipse(item.x, item.y + item.radius + 3, item.radius * 0.8, 4, 0, 0, Math.PI * 2);
          ctx.fill();
        }
        
        // –í—Ä–∞—â–µ–Ω–∏–µ
        ctx.translate(item.x, item.y);
        ctx.rotate(item.rotation);
        
        // –ë–µ–ª—ã–π –∫—Ä—É–≥ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
        const gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, item.radius);
        gradient.addColorStop(0, '#ffffff');
        gradient.addColorStop(1, '#f5f5f5');
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.arc(0, 0, item.radius, 0, Math.PI * 2);
        ctx.fill();
        
        // –ö–æ–Ω—Ç—É—Ä
        ctx.strokeStyle = item.type === 'tass' ? '#d32f2f' : '#1976d2';
        ctx.lineWidth = 3;
        ctx.stroke();
        
        // –õ–æ–≥–æ—Ç–∏–ø –ø–æ —Ü–µ–Ω—Ç—Ä—É
        const img = images[item.type];
        if (img.complete) {
          ctx.save();
          ctx.beginPath();
          ctx.arc(0, 0, item.radius - 4, 0, Math.PI * 2);
          ctx.clip();
          ctx.drawImage(img, -item.radius + 4, -item.radius + 4, (item.radius - 4) * 2, (item.radius - 4) * 2);
          ctx.restore();
        }
        
        ctx.restore();
      });
    }

    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ UI
    function drawUI() {
      // –ñ–∏–∑–Ω–∏
      ctx.fillStyle = '#FF5252';
      ctx.font = '20px Arial';
      for (let i = 0; i < config.game.lives; i++) {
        ctx.fillText('‚ù§Ô∏è', 20 + i * 35, 35);
      }
      
      // –ü—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–≤–Ω—è
      const progressWidth = 200;
      const progress = (config.game.itemsCollected / config.game.itemsToNextLevel) * progressWidth;
      
      ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
      ctx.fillRect(canvas.width/2 - progressWidth/2, 20, progressWidth, 10);
      
      ctx.fillStyle = '#f1e3b4';
      ctx.fillRect(canvas.width/2 - progressWidth/2, 20, progress, 10);
      
      // –¢–µ–∫—Å—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
      ctx.fillStyle = '#ffffff';
      ctx.font = '14px "Barlow Condensed"';
      ctx.textAlign = 'center';
      ctx.fillText(
        `${config.game.itemsCollected}/${config.game.itemsToNextLevel}`,
        canvas.width/2,
        35
      );
      
      // –¢–µ–Ω—å –ø–æ–¥ —Ç–µ–∫—Å—Ç–æ–º
      ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
      ctx.fillText(
        `${config.game.itemsCollected}/${config.game.itemsToNextLevel}`,
        canvas.width/2 + 1,
        36
      );
    }

    // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
    function gameLoop() {
      if (!config.game.running) return;
      
      config.game.time++;
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
      updatePlayer();
      updateObstacles();
      updateItems();
      
      // –û—Ç—Ä–∏—Å–æ–≤–∫–∞
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      drawBackground();
      drawObstacles();
      drawItems();
      drawPlayer();
      drawUI();
      
      requestAnimationFrame(gameLoop);
    }

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    document.addEventListener('keydown', (e) => {
      if ((e.code === 'Space' || e.key === ' ' || e.key === 'ArrowUp') && config.game.running) {
        jump();
        e.preventDefault();
      }
    });

    // –ú–æ–±–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    jumpBtn.addEventListener('touchstart', (e) => {
      jump();
      e.preventDefault();
    });

    // –ö–Ω–æ–ø–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    startBtn.addEventListener('click', initGame);
    restartBtn.addEventListener('click', initGame);

    // –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
    function handleResize() {
      const container = document.querySelector('.game-container');
      const rect = container.getBoundingClientRect();
      
      canvas.width = rect.width;
      canvas.height = rect.height;
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π
      player.y = canvas.height - config.groundHeight - config.player.height;
    }

    window.addEventListener('resize', handleResize);
    handleResize();

    // –ó–∞–ø—É—Å–∫
    handleResize();
    console.log('–ò–≥—Ä–∞ –≥–æ—Ç–æ–≤–∞! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª—ã tass.png –∏ journ.png –¥–ª—è –ª–æ–≥–æ—Ç–∏–ø–æ–≤');

  </script>
</body>
</html>
